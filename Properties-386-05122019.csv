#TYPE PscxDynamicType22
"resourceid","ResourceID1","PropertyName","PropertyValue"
"3709","3709","type","Nodes"
"3710","3710","RowsPerPage","20"
"3710","3710","SearchSWQL","select s1.caption as [Node],
s1.detailsurl as [_LinkFor_Node],
s1.statusled as [_IconFor_Node],
s1.groupip as [Multicast Group],
s1.rendezvouspointip as [RP],
s1.statusdescription as [Status],
s1.statusgroup as [_IconFor_Status],
case when s1.sourcebps> 1073741824 then (tostring(s1.sourcebps/1073741824) + ' Gbps')
when s1.sourcebps> 1048576 then (tostring(s1.sourcebps/1048576) + ' Mbps')
when s1.sourcebps> 1024 then (tostring(s1.sourcebps/1024) + ' Kbps')
else (tostring(s1.sourcebps) + ' bps')
end as [bps]

from (select distinct gn.node.caption ,
gn.node.detailsurl,
'/Orion/images/StatusIcons/Small-'+gn.node.statusled as [Statusled],
gn.multicastgroup.groupip ,
gn.rendezvouspoint.rendezvouspointip,
gn.statusdescription,
'/Orion/images/StatusIcons/Small-'+gn.statusdescription + '.gif' as statusgroup,
gn.sourcebps
from orion.npm.multicastrouting.groupnodes gn
where gn.node.caption like '%${SEARCH_STRING}%' or gn.multicastgroup.groupip like '%${SEARCH_STRING}%' or gn.rendezvouspoint.rendezvouspointip like '%${SEARCH_STRING}%'
) s1
order by s1.sourcebps desc"
"3710","3710","SWQL","select s1.caption as [Node],
s1.detailsurl as [_LinkFor_Node],
s1.statusled as [_IconFor_Node],
s1.groupip as [Multicast Group],
s1.rendezvouspointip as [RP],
s1.statusdescription as [Status],
s1.statusgroup as [_IconFor_Status],
case when s1.sourcebps> 1073741824 then (tostring(s1.sourcebps/1073741824) + ' Gbps')
when s1.sourcebps> 1048576 then (tostring(s1.sourcebps/1048576) + ' Mbps')
when s1.sourcebps> 1024 then (tostring(s1.sourcebps/1024) + ' Kbps')
else (tostring(s1.sourcebps) + ' bps')
end as [bps]

from (select distinct gn.node.caption ,
gn.node.detailsurl,
'/Orion/images/StatusIcons/Small-'+gn.node.statusled as [Statusled],
gn.multicastgroup.groupip ,
gn.rendezvouspoint.rendezvouspointip,
gn.statusdescription,
'/Orion/images/StatusIcons/Small-'+gn.statusdescription + '.gif' as statusgroup,
gn.sourcebps
from orion.npm.multicastrouting.groupnodes gn) s1
order by s1.sourcebps desc"
"3711","3711","RowsPerPage","20"
"3711","3711","SearchSWQL","select rp.rendezvouspointip as [RP IP], ip.node.caption as [Nodes],
ip.node.detailsurl as [_LinkFor_Nodes],
'/Orion/images/StatusIcons/Small-'+ ip.node.statusled as [_IconFor_Nodes],
count(*) as groups from orion.npm.multicastrouting.rendezvouspoints rp
left join orion.nodeipaddresses ip on ip.ipaddress = rp.rendezvouspointip
where  (rp.rendezvouspointip like '%${SEARCH_STRING}%' or ip.node.caption like '%${SEARCH_STRING}%')
group by ip.node.caption,rp.rendezvouspointip, ip.node.statusled, ip.node.detailsurl

order by rp.rendezvouspointip asc"
"3711","3711","SWQL","select rp.rendezvouspointip as [RP IP], ip.node.caption as [Nodes],
ip.node.detailsurl as [_LinkFor_Nodes],
'/Orion/images/StatusIcons/Small-'+ ip.node.statusled as [_IconFor_Nodes],
count(*) as groups from orion.npm.multicastrouting.rendezvouspoints rp
left join orion.nodeipaddresses ip on ip.ipaddress = rp.rendezvouspointip
group by ip.node.caption,rp.rendezvouspointip, ip.node.statusled, ip.node.detailsurl
order by rp.rendezvouspointip asc"
"3715","3715","RowsPerPage","20"
"3715","3715","SearchSWQL","select s1.sourceip as [Source],
s1.sourcemask as [Mask],
s1.groupnodename as [Node],
s1.groupip as [Multicast Group],
s1.flags as [Flags],
s1.displayname as [Protocol],
s1.inbps as [bps],
s1.uptime as [Up Time],
s1.upstreamipaddress as [Upstream IP],
s1.rendezvouspointip as [RP]
from 
(SELECT distinct s.sourceip, 
s.sourcemask,
 r.flags,
r.LastChangeUTC,
p.displayname,
r.inbps,
r.uptime,
 r.UpstreamIPAddress, 
r.GroupNode.RendezvousPoint.RendezvousPointIP,
r.groupnode.MulticastGroup.GroupIP,
r.groupnode.GroupNodeName

FROM Orion.NPM.MulticastRouting.Sources s
inner join orion.npm.MulticastRouting.MulticastRoutingTableReport r 
on s.MulticastSourceID = r.MulticastSourceID
inner join orion.npm.multicastrouting.multicastroutingprotocol p
on r.multicastprotocolid = p.multicastprotocolid
inner join 
(
select multicastsourceid, multicastgroupnodeid, max(lastchangeutc) as lastchangeutc from orion.npm.MulticastRouting.MulticastRoutingTableReport group by multicastsourceid, multicastgroupnodeid
)ss on ss.multicastsourceid = r.multicastsourceid and ss.multicastgroupnodeid = r.MulticastGroupNodeID and ss.lastchangeutc = r.LastChangeUTC
where s.SourceIP <>''
and (s.sourceip like '%${SEARCH_STRING}%' or r.upstreamipaddress like '%${SEARCH_STRING}%' or r.groupnode.rendezvouspoint.rendezvouspointip like '%${SEARCH_STRING}%' or r.groupnode.MulticastGroup.GroupIP  like '%${SEARCH_STRING}%')
)s1
order by s1.rendezvouspointip desc"
"3715","3715","SWQL","select s1.sourceip as [Source],
s1.sourcemask as [Mask],
s1.groupnodename as [Node],
s1.groupip as [Multicast Group],
s1.flags as [Flags],
s1.displayname as [Protocol],
s1.inbps as [bps],
s1.uptime as [Up Time],
s1.upstreamipaddress as [Upstream IP],
s1.rendezvouspointip as [RP]
from 
(SELECT distinct s.sourceip, 
s.sourcemask,
 r.flags,
r.LastChangeUTC,
p.displayname,
r.inbps,
r.uptime,
 r.UpstreamIPAddress, 
r.GroupNode.RendezvousPoint.RendezvousPointIP,
r.groupnode.MulticastGroup.GroupIP,
r.groupnode.GroupNodeName

FROM Orion.NPM.MulticastRouting.Sources s
inner join orion.npm.MulticastRouting.MulticastRoutingTableReport r 
on s.MulticastSourceID = r.MulticastSourceID
inner join orion.npm.multicastrouting.multicastroutingprotocol p
on r.multicastprotocolid = p.multicastprotocolid
inner join 
(
select multicastsourceid, multicastgroupnodeid, max(lastchangeutc) as lastchangeutc from orion.npm.MulticastRouting.MulticastRoutingTableReport group by multicastsourceid, multicastgroupnodeid
)ss on ss.multicastsourceid = r.multicastsourceid and ss.multicastgroupnodeid = r.MulticastGroupNodeID and ss.lastchangeutc = r.LastChangeUTC
where s.SourceIP <>''
)s1 

order by s1.rendezvouspointip desc"
